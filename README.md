# dotfiles
![Distro: Ubuntu](https://img.shields.io/badge/distro-ubuntu-E95420?style=flat-square&logo=ubuntu)
![Desktop: Gnome](https://img.shields.io/badge/desktop-gnome-4A86CF?style=flat-square&logo=gnome)
![Editor: vim](https://img.shields.io/badge/editor-vim-019733?style=flat-square&logo=vim)
![Multiplexer: tmux](https://img.shields.io/badge/multiplexer-tmux-1BB91F?style=flat-square&logo=tmux)
![Shell: fish](https://img.shields.io/badge/shell-fish-blue?style=flat-square&logo=data:image/png;base64,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)

My dotfiles describe my entire computer. They contain most of the configuration of my applications (both on the command line and on the GUI), but also the setup and update process as scripts. I'm using Ubuntu as my Linux distribution of choice. The content of `tilde` is the invisible configuration files in `~`. I'm using [Solarized Light](https://ethanschoonover.com/solarized) as my color scheme and [Input](http://input.fontbureau.com) as my font. This is how my work environment looks like:

![Screenshot](dotfiles.png)

My main computer is a desktop machine. On the go, I use a MacBook Pro. It runs macOS, and I try to emulate my work setup as much as possible using Homebrew (Why macOS? Because I need PowerPoint for giving trainings). See the [GUI section](#gui) for the main differences.

## exogenesis

`exogenesis` is a shell script that sets up a fresh (minimal) install of Ubuntu for me. When I run it again on an existing machine, it will add what I added since the last time I ran it and update packages. It takes care of:

* Adding APT repositories
* Installing and updating APT, Snap, Gem, Go and Rust packages
* Linking my dotfiles
* Setting the shell to Fish
* Adding the user to the docker group

`exogenesis-mac` tries to replicate exogenesis on the Mac.

## fish

I'm using [fish](http://fishshell.com) as my shell. After using ZSH for many years, I noticed that it does many things I needed to configure in ZSH by default, and switched to it. The only thing I configured is that I use [fzf](https://github.com/junegunn/fzf) because I really missed `Ctrl+r` for reverse searching and I like the incremental search.

The prompt is a tiny arrow (or a âœ¦ when there are jobs in the background) that is green when the last status exit was 0, and red otherwise. In the right prompt, I display the pwd and the current git status. I have a few aliases, scripts (see `tilde/exe`), and functions:

* With `j` (or `jump`) I can jump to my Code projects
* To start or continue working on a project, I use my tiny `s` (or `start`) function which starts (or attaches to) a tmux session for a project with the correct start directory.
* `l` lists all files with details, `ll` only the visible ones
* `tree` prints the folder structure as a tree
* `git sed` is a git alias to sed all files known to git (rhymes with `git grep`)
* `gb` is a prettier `git branch`
* `gl` is a prettier `git log`
* `mdoutline` shows the outline of a Markdown document (only works correctly, if you don't use the 'underline' variant for headlines)
* `serve` serve the current directory via nginx
* `postgres` and `redis` start a temporary PostgreSQL or Redis instance in a docker container
* `compressability` shows the size of a file, and its GZIPed and brotlied size
* `churn` shows the frequency of change of the files in git repo
* `history-analysis` shows the commands that you ran most in your (fish) shell
* `each-project` calls a command for each project in `~/Code` in parallel
* `gitkeeper` fetches and then checks if there is unpushed work on a repo
* `electric-monk` runs gitkeeper for each project (replacement for an old gem of mine)
* `battery` shows the current battery status
* `ecurl` downloads something but uses caching via ETag
* `link-dotfiles` links the provided paths as dotfiles in the home directory
* `add-to-groups` adds the current user to a list of groups
* `change-shell` changes the shell for the current user
* `webm` converts a video to [WebM](https://en.wikipedia.org/wiki/WebM) using ffmpeg

## vim

I'm doing all my programming and most of my writing in vim. My vim is very close to the default configuration, but I'm using [`tpope/vim-sensible`](https://github.com/tpope/vim-sensible) to set a few **reasonable defaults**. Instead of configuring spaces, tabs and similar things, I use [`editorconfig`](https://github.com/editorconfig/editorconfig-vim) to follow the convention of the projects. Additional **language support** is loaded on demand via [`sheerun/vim-polyglot`](https://github.com/sheerun/vim-polyglot).

To jump to files, I use a **fuzzy file finder** ([`junegunn/fzf`](https://github.com/junegunn/fzf)) that I've bound to Ctrl+P. I use [`fd`](https://github.com/sharkdp/fd) as the source for its suggestions which pays attention to `.gitignore`. I can't remember the last time I opened a file without it.

I use Tim Pope plugins for **commenting** ([`tpope/vim-commentary`](https://github.com/tpope/vim-commentary)) as well as **quoting/parenthesizing** ([`tpope/vim-surround`](https://github.com/tpope/vim-surround)) and make both **repeatable** ([`tpope/vim-repeat`](https://github.com/tpope/vim-repeat)).

I run my **Ruby tests and specs** via a key binding ([`skalnik/vim-vroom`](https://github.com/skalnik/vim-vroom)).

Finally, I'm using [`w0rp/ale`](https://github.com/w0rp/ale) for **formatting, linting feedback and LSP support**. Code is formatted automatically with [prettier](https://prettier.io) or a similar tool if it is available for the programming language. I show a ðŸ˜º in lines with linting errors, with details on hovering. The linters are autodetected, and I have quite a few installed. When pressing tab (and I'm not at the beginning of a line, where I actually want to insert a tab) I run the omnifunc provided by ALE to ask the according language server for a completion.

## Other commandline tools

* [`git`](https://www.git-scm.com) is the only version control system I use. It has two amazing companions: [`tig`](http://jonas.nitro.dk/tig) and [`delta`](https://github.com/dandavison/delta)
* [`tmux`](https://github.com/tmux/tmux/wiki) is the terminal multiplexer I use. I configured it with some more vim-like bindings and a nice status bar with the current time and battery charge.
* [`exa`](https://the.exa.website) is a replacement for `ls`
* [`ripgrep`](https://github.com/BurntSushi/ripgrep) is a replacement for `grep` that is so fast, that I can't really believe it
* [`fd`](https://github.com/sharkdp/fd) is the same for `find`
* [`jq`](http://stedolan.github.io/jq) is like `sed` for JSON data, but I mostly use it for pretty printing
* [`wget`](http://www.gnu.org/software/wget) and [`curl`](http://curl.haxx.se)
* [`pry`](http://pryrepl.org) is a replacement for Ruby's IRB with `amazing_print`
* [`ragel`](http://www.colm.net/open-source/ragel) is a beautiful state machine compiler
* [`yt-dlp`](https://github.com/yt-dlp/yt-dlp) allows me to download videos for train trips
* [`docker`](https://www.docker.com) and `docker-compose` because I really wish it would do what I want
* [`shellcheck`](https://www.shellcheck.net) to get feedback about shell scripts
* [`asciinema`](https://asciinema.org) to record terminal things
* [`direnv`](https://direnv.net) to load and unload environment variables depending on the current directory
* [`ffmpeg`](https://ffmpeg.org) for converting video and audio
* [`htop`](https://htop.dev) as a replacement for `top` to see how my cores and RAM are doing
* [`neofetch`](https://github.com/dylanaraps/neofetch) for those screenshots, you know
* [`pandoc`](https://pandoc.org) to convert between Markdown and... other formats like Microsoft Word
* [`pgcli`](https://www.pgcli.com) to peek into PostgreSQL databases
* [`spotify_player`](https://lib.rs/crates/spotify_player) to listen to music
* [`pdftk`](https://www.pdflabs.com/tools/pdftk-the-pdf-toolkit) for tweaking PDF documents
* [`borg`](https://www.borgbackup.org) for backups, using [BorgBase](https://www.borgbase.com) for offsite backups

## GUI

Even though I enjoy to use the command line for most things, there are certain things where I use a GUI :wink:
A lot of stuff is just a web app in a trench coat nowadays. I just use those in a browser (Slack, Microsoft Teams, Miro and Notion, for example).

|                           | Linux                                               | macOS           |
|---------------------------|-----------------------------------------------------|-----------------|
| Main Browser              | Firefox                                             | Firefox         |
| Secondary Browser         | Chromium                                            | Chromium        |
| Email & Calendar          | Thunderbird                                         | Built-in        |
| Terminal Emulator         | [Kitty](https://sw.kovidgoyal.net/kitty)            | iTerm2          |
| File Sync                 | [NextCloud](https://nextcloud.com)                  | -               |
| Play videos               | [mpv](https://mpv.io)                               | Built-in        |
| View PDFs                 | Built-in                                            | Built-in        |
| View Images               | Built-in                                            | Built-in        |
| Edit/Create Vector Images | [Inkscape](https://inkscape.org)                    | -               |
| Edit/Create Sound         | [Audacity](https://www.audacityteam.org)            | -               |
| Password Management       | [1Password](https://1password.com)                  | 1Password       |
| Mouse Configuration       | [Piper](https://github.com/libratbag/piper)         | Built-in        |
| Windows Emulation         | [Boxes](https://apps.gnome.org/app/org.gnome.Boxes) | -               |
| [Zoom](https://zoom.us)   | Official Client                                     | Official Client |
| Photo Management          | -                                                   | Built-in        |
| Office                    | -                                                   | Microsoft       |

Built-in means, I use whatever Gnome or macOS have pre-installed.

## Programming Languages

These are the programming languages I use:

* Ruby
    * Ruby is installed via the [Fullstaq Ruby repository](https://github.com/fullstaq-ruby/server-edition)
    * This includes rbenv to switch between versions
* JavaScript/TypeScript (Node, Browser or Deno)
    * Node is installed via the [NodeSource repository](https://github.com/nodesource/distributions)
    * Deno is installed via snap
* CSS
* Go
    * Go is installed via the regular Ubuntu repository

I like to play around with other languages like Rust and Clojure as well. I even wrote my [own little language](https://halunke.jetzt) :smile:

## Thanks

* To Drew Neil for his books about vim: [Practical Vim](https://pragprog.com/titles/dnvim2/practical-vim-second-edition) and [Modern Vim](https://pragprog.com/titles/modvim/modern-vim)
* To Brian P. Hogan for his [book about tmux](https://pragprog.com/titles/bhtmux2/tmux-2)
* To Gary Bernhardt for his [screencasts](https://www.destroyallsoftware.com/screencasts)
* To [Dirk](https://github.com/code-later), [Bascht](https://github.com/bascht) & [Bodo](https://github.com/bitboxer) for letting me steal from their dotfiles and providing feedback
